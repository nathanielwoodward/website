<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.60.1" />

    
    
    

<title>Productive Procrastination - gnuplot GIFs â€¢ Nathaniel Woodward</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Productive Procrastination - gnuplot GIFs"/>
<meta name="twitter:description" content="As the semester draws to a close, assignments have this way of becoming suddenly due and needing immediately to be done&hellip; while everything else, literally anything besides these assignments has this perverse way of becoming, in equal measure, more enticing, distracting, rewarding&hellip;
So, having just completed a final project for my C/Fortran programming course, and as other deadlines loom like so much Damoclean cutlery, I just can&#39;t quit tinkering with gnuplot!"/>

<meta property="og:title" content="Productive Procrastination - gnuplot GIFs" />
<meta property="og:description" content="As the semester draws to a close, assignments have this way of becoming suddenly due and needing immediately to be done&hellip; while everything else, literally anything besides these assignments has this perverse way of becoming, in equal measure, more enticing, distracting, rewarding&hellip;
So, having just completed a final project for my C/Fortran programming course, and as other deadlines loom like so much Damoclean cutlery, I just can&#39;t quit tinkering with gnuplot!" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/productive-procrastination-gnuplot-gifs/" />
<meta property="article:published_time" content="2014-05-03T00:00:00+00:00" />
<meta property="article:modified_time" content="2014-05-03T00:00:00+00:00" /><meta property="og:site_name" content=" " />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.43109490338b28cdd7a74845262efe59bf66fdc3530f5e818a66c9a579a79080.css" integrity="sha256-QxCUkDOLKM3Xp0hFJi7&#43;Wb9m/cNTD16BimbJpXmnkIA=">


<link rel="stylesheet" href="/scss/print.8c61428a4ae8b36c028e9198876312a2de5a2b3c80bbbdcceb98d738691c4f6b.css" integrity="sha256-jGFCikros2wCjpGYh2MSot5aKzyAu73M65jXOGkcT2s=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
    <script type="text/javascript"
   src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script type="text/javascript" src="/js/bigfoot.min.js"></script>
<script type="text/javascript">
    $.bigfoot();
</script>

</head>


    <body class="theme-base-09 ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
    
      
        
        
        
        
        <div class="author-image">
           <a href="/"><img src="/img/headshot_cropped_f2019.png" alt="Nathaniel Woodward" class="img--circle img--headshot element--center"></a>
        </div>
        
      
      <p class="site__description">
      <a href="mailto:nathanielraley@gmail.com"> Nathaniel Woodward 
      </a></p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Nathaniel Woodward</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/about/">
						<span>About</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/portfolio/">
						<span>Portfolio</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/teaching/">
						<span>Teaching</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/resume.html">
						<span>Vitae</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <br>
        <section class="social">
	
	<a href="https://twitter.com/Distributino" rel="me"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a>
	
	
	
	<a href="https://github.com/nathanielwoodward" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/nathanielraley" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://last.fm/user/ramimba" rel="me"><i class="fab fa-lastfm fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
</section>

      </div>
    </div>
    
<div class="copyright">
  &copy; 2022  
  
    <a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a>
  
</div>



  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Productive Procrastination - gnuplot GIFs</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> May 3, 2014
    
    
    
    
    
    <br/>
    <i class="fas fa-clock"></i> 3 min read
</div>


  </header>
  
  
  <div class="post">
    <p>As the semester draws to a close, assignments have this way of becoming suddenly due and needing immediately to be done&hellip; while <em>everything else, literally anything besides these assignments</em> has this perverse way of becoming, in equal measure, more enticing, distracting, rewarding&hellip;</p>
<p>So, having just completed a final project for my C/Fortran programming course, and as other deadlines loom like so much Damoclean cutlery, I just can't quit tinkering with gnuplot! I just <!-- raw HTML omitted -->wasted<!-- raw HTML omitted --> devoted 2+ hours to figuring out how to  generate an animated GIF from a textfile; wait till the end of the post  before passing judgment, but for comparison, <a href="http://blog.lindsaywoodward.com/">my wife constructed a gorgeous dress</a> in less time&hellip;</p>
<p>First of all, if you use gnuplot and haven't updated in a while, look  into it. Get at least v4.6 if you want full functionality; I was really impressed with these improvements.</p>
<p>The assignment was to use each language to write a program that discretizes and solves the <a href="http://en.wikipedia.org/wiki/Heat_equation">heat equation</a> in two dimensions:</p>
<p><img src="http://mathurl.com/l7ry6fl.png" alt=""></p>
<p>We were to achieve this using stencil updates; as an example, an interior update example from timestep t to timestep t+1 is shown below for the point <strong>e</strong>).</p>
<p><img src="http://mathurl.com/nqt785w.png" alt=""></p>
<p>Basically, it allows us to roughly model solutions to a parabolic partial differential equation that describes the way heat spreads through a 2D domain over time (shown above), without violating special relativity (I promise there's a pretty picture at the end of this post).</p>
<p>I did this in C somewhat kludgily with a 2D struct and a 3D array, using separate functions for I/O. In Fortran, things were smoother. I used a module containing a derived-type 3D array and I/O subroutines. To see the source files, see this <a href="https://github.com/nathanielraley/finalproject">link</a>.</p>
<p>So essentially I want to illustrate to you here how heat spreads out from a single constant heatpoint in a 2D domain, as modeled by my own code; for simplicity, lets make our domain a 9x9 grid where the center point (4,4) has a constant temperature value of 10 units. We are going to run my C program and ask for the temperatures of each point on the grid for 500 timesteps.</p>
<!-- raw HTML omitted -->
<p>In the above, <em>heat-sample.inp</em> shows the input file, and <em>output.txt</em> shows the output. We can use awk to parse it (right now the output is 40,500 lines). We want gnuplot to give us a heatmap of these values every 5 timesteps from 0 to 500, so we can visualize the heat spreading outward from the center of the domain. The following awk command says, amazingly, &ldquo;look in column 3 of file <em>output.txt</em> and create separate files named out1, out2, etc. for all rows in <em>output.txt</em> that have the same value for column 3 (which is timestep).&rdquo; This command splits the big output file into files with the data at each timestep. Then gnuplot can loop over all 500 files, plotting every 5th one, and create an animated .GIF like it's nothing:</p>
<!-- raw HTML omitted -->
<p>Here's the file &ldquo;animate.gif&rdquo;, our final product:</p>
<p><img src="https://nrwoodward.files.wordpress.com/2014/05/1fb01-animate.gif" alt=""></p>
<p>Over time, we see the constant, central heat point (yellow) warming up the entire 2D surface. This is my code in action! How about that! It really drives home the fact that a pretty graphic is actually just the dance of bits and addresses with a pixel mapping.</p>

  </div>
  


<div class="navigation navigation-single">
    
    <a href="/posts/the-piteous-and-worsening-state-of-kellers-academic-decathlon-program/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">The Piteous and Worsening State of Keller&#39;s Academic Decathlon Program</span>
    </a>
    
    
    <a href="/posts/introduction-to-the-neurochemical-foundations-of-learning-and-memory-for-non-science-majors/" class="navigation-next">
      <span class="navigation-title">Introduction to the Neurochemical Foundations of Learning and Memory for Non-Science Majors</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    


</article>


        </div>
        
    

<script defer src="https://use.fontawesome.com/releases/v5.5.0/js/all.js" integrity="sha384-GqVMZRt5Gn7tB9D9q7ONtcp4gtHIUEW/yG7h98J7IpE3kpi+srfFyyB/04OV6pG0" crossorigin="anonymous"></script>


    
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    




    



    </body>
</html>
